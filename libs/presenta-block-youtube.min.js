!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e="undefined"!=typeof globalThis?globalThis:e||self).PresentaBlockYoutube=t()}(this,(function(){"use strict";var e="style_youtube__1KEl0",t="style_blockmouse__3K3Xl",o="style_playing__2SoSR";!function(e,t){void 0===t&&(t={});var o=t.insertAt;if(e&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=e:i.appendChild(document.createTextNode(e))}}(".style_youtube__1KEl0{display:flex;position:relative}.style_youtube__1KEl0,.style_youtube__1KEl0 iframe{width:100%;height:100%}.style_youtube__1KEl0 img{-o-object-fit:cover;object-fit:cover}.style_blockmouse__3K3Xl,.style_youtube__1KEl0 img{position:absolute;top:0;left:0;width:100%;height:100%}.style_playing__2SoSR img{display:none}");"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self&&self;var n=function(e,t,o){return e(o={path:t,exports:{},require:function(e,t){return function(){throw new Error("Dynamic requires are not currently supported by @rollup/plugin-commonjs")}(null==t&&o.path)}},o.exports),o.exports}((function(e,t){e.exports=function(e,t){if(null==t&&(t={fuzzy:!0}),/youtu\.?be/.test(e)){var o,n=[/youtu\.be\/([^#\&\?]{11})/,/\?v=([^#\&\?]{11})/,/\&v=([^#\&\?]{11})/,/embed\/([^#\&\?]{11})/,/\/v\/([^#\&\?]{11})/];for(o=0;o<n.length;++o)if(n[o].test(e))return n[o].exec(e)[1];if(t.fuzzy){var i=e.split(/[\/\&\?=#\.\s]/g);for(o=0;o<i.length;++o)if(/^[^#\&\?]{11}$/.test(i[o]))return i[o]}}return null}}));const i=function(n,i){i._mode;const l="present"===i._mode,r=i.key||" ",s=document.createElement("div");s.classList.add(e);var d,u="presenta-player-"+Math.random();s.innerHTML=`\n    <div id="${u}"></div>\n    <img src="${i.thumb}" />\n    <div class="${t}"></div>\n  `,n.appendChild(s),(()=>{if(!document.querySelector("#presenta-youtube-iframe-api-script")){var e=document.createElement("script");e.id="presenta-youtube-iframe-api-script",e.src="https://www.youtube.com/iframe_api";var t=document.getElementsByTagName("script")[0];t.parentNode.insertBefore(e,t),window.onYouTubeIframeAPIReady=()=>{}}})();let a=!1;this.beforeDestroy=()=>{i._rootElement.removeEventListener("keyup",c),n.removeEventListener("click",y)},this.stepForward=e=>{};const p=()=>{d.playVideo(),s.classList.add(o),a=!0},y=()=>{d?a?(d.pauseVideo(),a=!1):p():setTimeout((()=>{d=new YT.Player(u,{height:"100%",width:"100%",videoId:i.ytid,autoplay:i.autoplay?1:0,loop:i.loop,controls:i.controls?1:0,modestbranding:1,events:{onReady:e=>{i.preload?(d.playVideo(),d.pauseVideo()):p()},onStateChange:e=>console.log("change",e)}})}))},c=e=>{e.key===r&&(y(),e.stopPropagation(),e.preventDefault())};l&&(i._rootElement.addEventListener("keyup",c),n.addEventListener("click",y)),(i.autoplay||i.preload)&&l&&y()};return i.install=e=>{e.addBlock("youtube",i),e.io.addPreload&&e.io.addPreload({type:"youtube",field:"thumb",as:"image"})},i.run=e=>{e.scenes.forEach((e=>{e.blocks.forEach((e=>{"youtube"===e.type&&(e.ytid=11===e.url.length?e.url:n(e.url),e.thumb=`https://i.ytimg.com/vi/${e.ytid}/hqdefault.jpg`)}))}))},"undefined"!=typeof window&&window.Presenta&&window.Presenta.use(i),i}));
